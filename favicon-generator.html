<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Favicon Generator - åœ†è§’å›¾æ ‡ç”Ÿæˆå™¨</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'JetBrains Mono', 'Segoe UI', monospace;
      padding: 40px 20px;
      max-width: 900px;
      margin: 0 auto;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    .upload-section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 12px;
      border: 2px dashed #ddd;
    }
    .upload-section:hover {
      border-color: #667eea;
      background: #f0f4ff;
    }
    input[type="file"] {
      display: block;
      margin-bottom: 15px;
      padding: 10px;
      font-size: 14px;
    }
    .slider-control {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .slider-control label {
      font-weight: 600;
      color: #555;
    }
    input[type="range"] {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: #ddd;
      outline: none;
      -webkit-appearance: none;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #667eea;
      cursor: pointer;
    }
    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #667eea;
      cursor: pointer;
      border: none;
    }
    .radius-value {
      font-weight: bold;
      color: #667eea;
      min-width: 45px;
      text-align: right;
    }
    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    .preview-item {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }
    .preview-item h3 {
      font-size: 14px;
      color: #555;
      margin-bottom: 15px;
    }
    canvas {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 30px;
    }
    button {
      padding: 15px 25px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transition: transform 0.2s, box-shadow 0.2s;
      font-family: inherit;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }
    button:active {
      transform: translateY(0);
    }
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
    .instructions {
      margin-top: 30px;
      padding: 20px;
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      border-radius: 8px;
    }
    .instructions h3 {
      color: #856404;
      margin-bottom: 10px;
      font-size: 16px;
    }
    .instructions ol {
      margin-left: 20px;
      color: #856404;
    }
    .instructions li {
      margin: 8px 0;
      line-height: 1.6;
    }
    .instructions code {
      background: #fff;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¨ Favicon Generator</h1>
    <p class="subtitle">ä¸ºæ‚¨çš„é¡¹ç›®ç”Ÿæˆå¸¦åœ†è§’çš„å›¾æ ‡</p>
    
    <div class="upload-section">
      <input type="file" id="imageInput" accept="image/*">
      <div class="slider-control">
        <label>åœ†è§’åŠå¾„:</label>
        <input type="range" id="radiusSlider" min="0" max="50" value="20">
        <span class="radius-value"><span id="radiusValue">20</span>%</span>
      </div>
    </div>
    
    <div class="preview-grid">
      <div class="preview-item">
        <h3>ğŸ“± Favicon 32x32</h3>
        <canvas id="canvas32" width="32" height="32"></canvas>
      </div>
      
      <div class="preview-item">
        <h3>ğŸ–¼ï¸ PWA Icon 192x192</h3>
        <canvas id="canvas192" width="192" height="192"></canvas>
      </div>
      
      <div class="preview-item">
        <h3>ğŸ Apple Touch Icon 180x180</h3>
        <canvas id="canvas180" width="180" height="180"></canvas>
      </div>
    </div>
    
    <div class="buttons">
      <button onclick="download('favicon.ico', 32)" id="btn32">ä¸‹è½½ favicon.ico (32x32)</button>
      <button onclick="download('favicon-192.png', 192)" id="btn192">ä¸‹è½½ favicon-192.png</button>
      <button onclick="download('apple-touch-icon.png', 180)" id="btn180">ä¸‹è½½ Apple Touch Icon</button>
    </div>
    
    <div class="instructions">
      <h3>ğŸ“ ä½¿ç”¨è¯´æ˜</h3>
      <ol>
        <li>ç‚¹å‡»ä¸Šæ–¹"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®ï¼Œä¸Šä¼ æ‚¨çš„å›¾ç‰‡</li>
        <li>è°ƒæ•´"åœ†è§’åŠå¾„"æ»‘å—ï¼Œé¢„è§ˆä¸åŒçš„åœ†è§’æ•ˆæœ</li>
        <li>ç‚¹å‡»ä¸‹è½½æŒ‰é’®ï¼Œä¿å­˜ç”Ÿæˆçš„å›¾æ ‡æ–‡ä»¶</li>
        <li>å°†ä¸‹è½½çš„æ–‡ä»¶ç§»åŠ¨åˆ°é¡¹ç›®çš„ <code>public/</code> ç›®å½•</li>
        <li>åœ¨ <code>index.html</code> ä¸­æ·»åŠ å›¾æ ‡é“¾æ¥ï¼ˆå·²è‡ªåŠ¨é…ç½®ï¼‰</li>
      </ol>
    </div>
  </div>

  <script>
    let originalImage = null;
    const buttons = [
      document.getElementById('btn32'),
      document.getElementById('btn192'),
      document.getElementById('btn180')
    ];
    
    // ç¦ç”¨æ‰€æœ‰ä¸‹è½½æŒ‰é’®
    function disableButtons() {
      buttons.forEach(btn => btn.disabled = true);
    }
    
    // å¯ç”¨æ‰€æœ‰ä¸‹è½½æŒ‰é’®
    function enableButtons() {
      buttons.forEach(btn => btn.disabled = false);
    }
    
    disableButtons();
    
    document.getElementById('imageInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(event) {
        const img = new Image();
        img.onload = function() {
          originalImage = img;
          updatePreviews();
          enableButtons();
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });
    
    document.getElementById('radiusSlider').addEventListener('input', function(e) {
      document.getElementById('radiusValue').textContent = e.target.value;
      if (originalImage) updatePreviews();
    });
    
    function drawRoundedImage(canvas, img, borderRadiusPercent) {
      const ctx = canvas.getContext('2d');
      const size = canvas.width;
      const radius = (size * borderRadiusPercent) / 100;
      
      // Clear canvas
      ctx.clearRect(0, 0, size, size);
      
      // Create rounded rectangle clipping path
      ctx.beginPath();
      ctx.moveTo(radius, 0);
      ctx.lineTo(size - radius, 0);
      ctx.quadraticCurveTo(size, 0, size, radius);
      ctx.lineTo(size, size - radius);
      ctx.quadraticCurveTo(size, size, size - radius, size);
      ctx.lineTo(radius, size);
      ctx.quadraticCurveTo(0, size, 0, size - radius);
      ctx.lineTo(0, radius);
      ctx.quadraticCurveTo(0, 0, radius, 0);
      ctx.closePath();
      ctx.clip();
      
      // Draw image
      ctx.drawImage(img, 0, 0, size, size);
    }
    
    function updatePreviews() {
      if (!originalImage) return;
      
      const radius = parseInt(document.getElementById('radiusSlider').value);
      
      const canvas32 = document.getElementById('canvas32');
      const canvas192 = document.getElementById('canvas192');
      const canvas180 = document.getElementById('canvas180');
      
      drawRoundedImage(canvas32, originalImage, radius);
      drawRoundedImage(canvas192, originalImage, radius);
      drawRoundedImage(canvas180, originalImage, radius);
    }
    
    function download(filename, size) {
      if (!originalImage) {
        alert('è¯·å…ˆé€‰æ‹©å›¾ç‰‡ï¼');
        return;
      }
      
      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      
      const radius = parseInt(document.getElementById('radiusSlider').value);
      drawRoundedImage(canvas, originalImage, radius);
      
      canvas.toBlob(function(blob) {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      }, 'image/png');
    }
  </script>
</body>
</html>
